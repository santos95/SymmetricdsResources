## CHANGE OR SET THE netplan config file
    cd /etc/netplan/

## EDIT THE FILE (FOR UBUNTU 22 IS 01.. )
     nano 01-network-manager-all.yaml

## THIS ONE SET A STATIC IP ADDRESS, NAMESERVERS (DNS), AND GATEWAY (routers default)
    # Let NetworkManager manage all devices on this system
    network:
    version: 2
    renderer: NetworkManager
    ethernets:
        enp0s3:
        addresses:
        - 192.168.1.40/24
        nameservers:
            addresses: [8.8.8.8, 8.8.4.4]
        routes:
            - to: default
            via: 192.168.1.1

## CHECH THE CONFIGURATION
    netplan try

## IF THE CONFIG IS CORRECT
    netplan apply   

## TO KEEP THE CONFIG OF THE DNS CHANGE THE resolv.conf file
    nano /etc/resolv.conf.d

## ADD THE DNS SERVERS THAT YOU WANT TO SET
    # Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
    # DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
    # 127.0.0.53 is the systemd-resolved stub resolver.
    # run "systemd-resolve --status" to see details about the actual nameservers.

    nameserver 8.8.8.8
    nameserver 8.8.4.4
    nameserver 127.0.0.53

## INSTALL resolvconf
    apt install resolvconf
    systemctl status resolvconf.service
    systemctl start resolvconf.service
    systemctl enable resolvconf.service

## EDIT THE head file
    nano /etc/resolvconf/resolv.conf.d/head

## restart the service 
    systemctl restart resolvconf.service
    sudo systemctl restart systemd-resolved.service

## to check if everything is ok
    systemd-resolve --status
